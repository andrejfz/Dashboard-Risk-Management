<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Valutazione Rischio - E-commerce Abbigliamento</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .dashboard {
            padding: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card.critico { border-left-color: #e74c3c; }
        .stat-card.alto { border-left-color: #f39c12; }
        .stat-card.medio { border-left-color: #f1c40f; }
        .stat-card.basso { border-left-color: #2ecc71; }
        .stat-card.molto-basso { border-left-color: #95a5a6; }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .risk-matrix {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .risk-matrix h3 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.5em;
        }

        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 2px;
            max-width: 600px;
            margin: 0 auto;
        }

        .matrix-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .matrix-header {
            background: #34495e;
            color: white;
        }

        .matrix-low { background: #2ecc71; color: white; }
        .matrix-medium { background: #f1c40f; color: #2c3e50; }
        .matrix-high { background: #f39c12; color: white; }
        .matrix-critical { background: #e74c3c; color: white; }

        .matrix-cell:hover:not(.matrix-header) {
            transform: scale(1.1);
            z-index: 10;
        }

        .top-risks {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .top-risks h3 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.5em;
        }

        .risk-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid;
            transition: all 0.3s ease;
        }

        .risk-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .risk-item.alto { border-left-color: #f39c12; }
        .risk-item.medio { border-left-color: #f1c40f; }

        .risk-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .risk-id {
            font-weight: bold;
            color: #2c3e50;
        }

        .risk-level {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .risk-level.alto {
            background: #f39c12;
            color: white;
        }

        .risk-level.medio {
            background: #f1c40f;
            color: #2c3e50;
        }

        .risk-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            font-size: 0.95em;
            color: #666;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .filter-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-group label {
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }

        .filter-group select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }

        .recommendations {
            background: linear-gradient(135deg, #e8f5e8, #d4f1d4);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #2ecc71;
        }

        .recommendations h3 {
            color: #27ae60;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .recommendation-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .risk-details {
                grid-template-columns: 1fr;
            }
            
            .controls {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è Dashboard Valutazione Rischio</h1>
            <p>E-commerce Abbigliamento - Analisi Sicurezza Informatica</p>
        </div>

        <div class="dashboard">
            <!-- Statistiche Riepilogative -->
            <div class="stats-grid">
                <div class="stat-card critico">
                    <div class="stat-number" id="stat-critico">0</div>
                    <div class="stat-label">Critico</div>
                </div>
                <div class="stat-card alto">
                    <div class="stat-number" id="stat-alto">147</div>
                    <div class="stat-label">Alto</div>
                </div>
                <div class="stat-card medio">
                    <div class="stat-number" id="stat-medio">92</div>
                    <div class="stat-label">Medio</div>
                </div>
                <div class="stat-card basso">
                    <div class="stat-number" id="stat-basso">6</div>
                    <div class="stat-label">Basso</div>
                </div>
                <div class="stat-card molto-basso">
                    <div class="stat-number" id="stat-molto-basso">0</div>
                    <div class="stat-label">Molto Basso</div>
                </div>
            </div>

            <!-- Controlli -->
            <div class="controls">
                <button class="btn btn-primary" onclick="generateNewAssessment()">
                    üîÑ Nuova Valutazione
                </button>
                <button class="btn btn-secondary" onclick="exportResults()">
                    üìä Esporta Risultati
                </button>
                <button class="btn btn-success" onclick="showRecommendations()">
                    üí° Raccomandazioni
                </button>
                <a href="document.pdf" download="documento_settore_e-commerce.pdf" class="btn btn-primary">
                    üìÑ Scarica Documento 
                </a>
            </div>

            <!-- Filtri -->
            <div class="filter-section">
                <div class="filter-grid">
                    <div class="filter-group">
                        <label for="asset-filter">Filtra per Asset:</label>
                        <select id="asset-filter" onchange="applyFilters()">
                            <option value="">Tutti gli Asset</option>
                            <option value="Sito Web E-commerce">Sito Web E-commerce</option>
                            <option value="Database Clienti">Database Clienti</option>
                            <option value="Sistema Pagamenti">Sistema Pagamenti</option>
                            <option value="Infrastruttura Server">Infrastruttura Server</option>
                            <option value="Archivio Dati Carte">Archivio Dati Carte</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="risk-filter">Filtra per Livello Rischio:</label>
                        <select id="risk-filter" onchange="applyFilters()">
                            <option value="">Tutti i Livelli</option>
                            <option value="Critico">Critico</option>
                            <option value="Alto">Alto</option>
                            <option value="Medio">Medio</option>
                            <option value="Basso">Basso</option>
                            <option value="Molto Basso">Molto Basso</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="compliance-filter">Filtra per Conformit√†:</label>
                        <select id="compliance-filter" onchange="applyFilters()">
                            <option value="">Tutte le Normative</option>
                            <option value="PCI DSS">PCI DSS</option>
                            <option value="GDPR">GDPR</option>
                            <option value="Misure Minime AgID">Misure Minime AgID</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Matrice di Rischio -->
            <div class="risk-matrix">
                <h3>üìä Matrice di Rischio (Probabilit√† vs Impatto)</h3>
                <div class="matrix-grid">
                    <div class="matrix-cell matrix-header"></div>
                    <div class="matrix-cell matrix-header">1</div>
                    <div class="matrix-cell matrix-header">2</div>
                    <div class="matrix-cell matrix-header">3</div>
                    <div class="matrix-cell matrix-header">4</div>
                    <div class="matrix-cell matrix-header">5</div>
                    
                    <div class="matrix-cell matrix-header">5</div>
                    <div class="matrix-cell matrix-medium" data-risk="5-1">M</div>
                    <div class="matrix-cell matrix-high" data-risk="5-2">A</div>
                    <div class="matrix-cell matrix-high" data-risk="5-3">A</div>
                    <div class="matrix-cell matrix-critical" data-risk="5-4">C</div>
                    <div class="matrix-cell matrix-critical" data-risk="5-5">C</div>
                    
                    <div class="matrix-cell matrix-header">4</div>
                    <div class="matrix-cell matrix-medium" data-risk="4-1">M</div>
                    <div class="matrix-cell matrix-medium" data-risk="4-2">M</div>
                    <div class="matrix-cell matrix-high" data-risk="4-3">A</div>
                    <div class="matrix-cell matrix-high" data-risk="4-4">A</div>
                    <div class="matrix-cell matrix-critical" data-risk="4-5">C</div>
                    
                    <div class="matrix-cell matrix-header">3</div>
                    <div class="matrix-cell matrix-low" data-risk="3-1">B</div>
                    <div class="matrix-cell matrix-medium" data-risk="3-2">M</div>
                    <div class="matrix-cell matrix-medium" data-risk="3-3">M</div>
                    <div class="matrix-cell matrix-high" data-risk="3-4">A</div>
                    <div class="matrix-cell matrix-high" data-risk="3-5">A</div>
                    
                    <div class="matrix-cell matrix-header">2</div>
                    <div class="matrix-cell matrix-low" data-risk="2-1">B</div>
                    <div class="matrix-cell matrix-low" data-risk="2-2">B</div>
                    <div class="matrix-cell matrix-medium" data-risk="2-3">M</div>
                    <div class="matrix-cell matrix-medium" data-risk="2-4">M</div>
                    <div class="matrix-cell matrix-high" data-risk="2-5">A</div>
                    
                    <div class="matrix-cell matrix-header">1</div>
                    <div class="matrix-cell matrix-low" data-risk="1-1">B</div>
                    <div class="matrix-cell matrix-low" data-risk="1-2">B</div>
                    <div class="matrix-cell matrix-low" data-risk="1-3">B</div>
                    <div class="matrix-cell matrix-medium" data-risk="1-4">M</div>
                    <div class="matrix-cell matrix-medium" data-risk="1-5">M</div>
                </div>
                <p style="text-align: center; margin-top: 15px; color: #666;">
                    <strong>Legenda:</strong> B = Basso, M = Medio, A = Alto, C = Critico
                </p>
            </div>

            <!-- Top Rischi -->
            <div class="top-risks">
                <h3>üö® Top 10 Rischi Prioritari</h3>
                <div id="risks-container">
                    <!-- I rischi verranno popolati dinamicamente -->
                </div>
            </div>

            <!-- Raccomandazioni -->
            <div class="recommendations" id="recommendations-section" style="display: none;">
                <h3>üí° Raccomandazioni Prioritarie</h3>
                <div class="recommendation-item">
                    <strong>1. Azioni Immediate (Rischi Alto/Critico):</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>Implementare controlli di accesso basati sui ruoli (RBAC)</li>
                        <li>Utilizzare query parametrizzate per prevenire SQL Injection</li>
                        <li>Implementare Web Application Firewall (WAF)</li>
                        <li>Condurre audit di sicurezza immediato</li>
                    </ul>
                </div>
                <div class="recommendation-item">
                    <strong>2. Conformit√† Normativa:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>Implementare controlli PCI DSS per protezione dati carte di credito</li>
                        <li>Condurre DPIA (Data Protection Impact Assessment) per GDPR</li>
                        <li>Allinearsi alle Misure Minime di Sicurezza ICT AgID</li>
                        <li>Implementare crittografia forte per dati sensibili</li>
                    </ul>
                </div>
                <div class="recommendation-item">
                    <strong>3. Monitoraggio e Miglioramento Continuo:</strong>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li>Implementare SIEM per monitoraggio eventi di sicurezza</li>
                        <li>Condurre assessment di sicurezza trimestrali</li>
                        <li>Aggiornare regolarmente la valutazione del rischio</li>
                        <li>Formare il personale sulla sicurezza informatica</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>¬© 2025 Risk Assessment Dashboard - Generato da Manus AI | Metodologia: NIST CSF + PCI DSS + GDPR</p>
        </div>
    </div>

    <script>
        // Dati dei rischi simulati (in una implementazione reale, questi verrebbero caricati da un file JSON)
        const topRisks = [
            {
                id: "RISK-001",
                asset: "Sito Web E-commerce",
                threat: "SQL Injection",
                vulnerability: "Broken Access Control",
                riskLevel: "Alto",
                riskScore: 20.00,
                compliance: ["GDPR", "Misure Minime AgID"]
            },
            {
                id: "RISK-003",
                asset: "Sito Web E-commerce",
                threat: "SQL Injection",
                vulnerability: "Injection",
                riskLevel: "Alto",
                riskScore: 20.00,
                compliance: ["GDPR", "Misure Minime AgID"]
            },
            {
                id: "RISK-050",
                asset: "Database Clienti",
                threat: "SQL Injection",
                vulnerability: "Broken Access Control",
                riskLevel: "Alto",
                riskScore: 20.00,
                compliance: ["GDPR", "Misure Minime AgID"]
            },
            {
                id: "RISK-099",
                asset: "Sistema Pagamenti",
                threat: "Data Breach",
                vulnerability: "Cryptographic Failures",
                riskLevel: "Alto",
                riskScore: 18.75,
                compliance: ["PCI DSS", "GDPR"]
            },
            {
                id: "RISK-175",
                asset: "Archivio Dati Carte",
                threat: "Cross-Site Scripting (XSS)",
                vulnerability: "Insecure Design",
                riskLevel: "Medio",
                riskScore: 15.00,
                compliance: ["PCI DSS"]
            }
        ];

        // Popola i rischi nella dashboard
        function populateRisks(risks = topRisks) {
            const container = document.getElementById('risks-container');
            container.innerHTML = '';

            risks.forEach(risk => {
                const riskElement = document.createElement('div');
                riskElement.className = `risk-item ${risk.riskLevel.toLowerCase()}`;
                
                riskElement.innerHTML = `
                    <div class="risk-header">
                        <span class="risk-id">${risk.id}</span>
                        <span class="risk-level ${risk.riskLevel.toLowerCase()}">${risk.riskLevel}</span>
                    </div>
                    <div class="risk-details">
                        <div>
                            <strong>Asset:</strong> ${risk.asset}<br>
                            <strong>Minaccia:</strong> ${risk.threat}
                        </div>
                        <div>
                            <strong>Vulnerabilit√†:</strong> ${risk.vulnerability}<br>
                            <strong>Punteggio:</strong> ${risk.riskScore.toFixed(2)}<br>
                            <strong>Conformit√†:</strong> ${risk.compliance.join(', ')}
                        </div>
                    </div>
                `;
                
                container.appendChild(riskElement);
            });
        }

        // Applica filtri
        function applyFilters() {
            const assetFilter = document.getElementById('asset-filter').value;
            const riskFilter = document.getElementById('risk-filter').value;
            const complianceFilter = document.getElementById('compliance-filter').value;

            let filteredRisks = topRisks.filter(risk => {
                let matches = true;
                
                if (assetFilter && risk.asset !== assetFilter) {
                    matches = false;
                }
                
                if (riskFilter && risk.riskLevel !== riskFilter) {
                    matches = false;
                }
                
                if (complianceFilter && !risk.compliance.includes(complianceFilter)) {
                    matches = false;
                }
                
                return matches;
            });

            populateRisks(filteredRisks);
        }

        // Genera nuova valutazione
        function generateNewAssessment() {
            // Simula una nuova valutazione con valori casuali
            const stats = ['stat-critico', 'stat-alto', 'stat-medio', 'stat-basso', 'stat-molto-basso'];
            stats.forEach(statId => {
                const element = document.getElementById(statId);
                const currentValue = parseInt(element.textContent);
                const newValue = Math.max(0, currentValue + Math.floor(Math.random() * 21) - 10);
                
                // Animazione del contatore
                animateCounter(element, currentValue, newValue);
            });
            
            alert('‚úÖ Nuova valutazione del rischio generata con successo!');
        }

        // Anima il contatore
        function animateCounter(element, start, end) {
            const duration = 1000;
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current);
            }, 16);
        }

        // Esporta risultati
        function exportResults() {
            const data = {
                timestamp: new Date().toISOString(),
                summary: {
                    critico: document.getElementById('stat-critico').textContent,
                    alto: document.getElementById('stat-alto').textContent,
                    medio: document.getElementById('stat-medio').textContent,
                    basso: document.getElementById('stat-basso').textContent,
                    molto_basso: document.getElementById('stat-molto-basso').textContent
                },
                topRisks: topRisks
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `risk_assessment_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('üìä Risultati esportati con successo!');
        }

        // Mostra/nascondi raccomandazioni
        function showRecommendations() {
            const section = document.getElementById('recommendations-section');
            if (section.style.display === 'none') {
                section.style.display = 'block';
                section.scrollIntoView({ behavior: 'smooth' });
            } else {
                section.style.display = 'none';
            }
        }

        // Gestisce i click sulla matrice di rischio
        document.querySelectorAll('.matrix-cell[data-risk]').forEach(cell => {
            cell.addEventListener('click', function() {
                const riskCoord = this.getAttribute('data-risk');
                const [prob, impact] = riskCoord.split('-');
                alert(`üìä Cella Matrice: Probabilit√† ${prob}, Impatto ${impact}\n\nQuesta cella rappresenta scenari con probabilit√† ${prob}/5 e impatto ${impact}/5.`);
            });
        });

        // Inizializza la dashboard
        document.addEventListener('DOMContentLoaded', function() {
            populateRisks();
            
            // Animazione iniziale dei contatori
            setTimeout(() => {
                const counters = document.querySelectorAll('.stat-number');
                counters.forEach(counter => {
                    const target = parseInt(counter.textContent);
                    counter.textContent = '0';
                    animateCounter(counter, 0, target);
                });
            }, 500);
        });
    </script>
</body>
</html>
